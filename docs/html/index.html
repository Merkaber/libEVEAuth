<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libEVEAuth: libEVEAuth 1.0.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libEVEAuth
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A authentication library for the ESI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">libEVEAuth 1.0.0 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> libEVEAuth is a simple library for authorization handling with the <a href="https://github.com/esi/esi-docs">EVE swagger interface</a> 'ESI' for a native C++ application.</p>
<p>If you want to make a native C++ application... this library is for you. <br  />
 If you want to make a native C application... this library is <b>not</b> for you.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
How to use</h1>
<p>If you want to know how the authorization flow works, read the <a href="https://github.com/esi/esi-docs">docs</a>. <br  />
 For doxygen documentation open <code>/../../libEVEAuth/docs/html/index.php</code></p>
<p>After creating an <code><a class="el" href="class_e_v_e_auth_1_1_auth.html">EVEAuth::Auth</a></code> object with the applications client_id and the related scope, the user have to log into his account through the received url from <code>auth.generate_auth_url();</code>. After login, the user will be redirected to the localhost by default and the code value is received. You then have to retrieve the code value from the redirect url and set it to the auth object by calling <code>auth.set_code_val(code_val);</code>. Now you can start the authorization flow by calling <code>auth.start();</code>. The authorization token will be refreshed every 900 seconds by default.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &quot;EVEAuth/Auth.h&quot;</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">std::string client_id = &quot;03e...168&quot;;</div>
<div class="line">std::string scope = &quot;esi-characters.read_blueprints.v1&quot;;</div>
<div class="line"> </div>
<div class="line">EVEAuth::Auth auth(client_id, scope);</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; auth.generate_auth_url() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">std::string code_val;</div>
<div class="line"> </div>
<div class="line">if (std::cin &gt;&gt; code_val) {</div>
<div class="line">    auth.set_code_val(code_val);</div>
<div class="line">    try {</div>
<div class="line">        auth.start();</div>
<div class="line">    } catch (EVEAuth::AuthException&amp; e) {</div>
<div class="line">        std::cout &lt;&lt; e.get_error_code() &lt;&lt; &quot;: &quot; &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::string q = &quot;characters/&quot; + auth.get_character_id() + &quot;/blueprints/&quot;;</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">    std::cout &lt;&lt; auth.simple_auth_query(q) &lt;&lt; std::endl;</div>
<div class="line">} catch (EVEAuth::AuthException&amp; e) {</div>
<div class="line">    std::cout &lt;&lt; e.get_error_code() &lt;&lt; &quot;: &quot; &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">...</div>
</div><!-- fragment --><p>On Windows you have to set the path to the cacert.pem file before starting authorization since Windows may lack the ssl certificates. </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">auth.set_cacert_path(path);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
Dependencies:</h2>
<ul>
<li>c++11&lt;</li>
<li><a href="https://www.openssl.org/">OpenSSL</a></li>
<li><a href="https://curl.haxx.se/libcurl/">libcurl</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Third party libraries used:</h2>
<ul>
<li><a href="https://github.com/kazuho/picojson">picojson</a> by Cybozu Labs, Inc. / Kazuho Oku</li>
<li><a href="https://github.com/Thalhammer/jwt-cpp">jwt-cpp</a> by Thalhammer</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Building on Windows</h2>
<p>I recommend using <a href="http://mingw-w64.org/doku.php">MinGW_w64</a> and <a href="https://cmake.org/">CMake</a> for building. <br  />
</p>
<p>Read this tutorial for installing with <a href="https://www.msys2.org/">msys2</a>.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Get libCurl and OpenSSL for linking</h3>
<p>Start the command prompt <code>C:\msys64\mingw64.exe</code> and download the necessary files:</p>
<div class="fragment"><div class="line">pacman -S openssl-devel</div>
<div class="line">pacman -S curl</div>
<div class="line">pacman -S libcurl</div>
</div><!-- fragment --><p>If the curl dll is missing, I recommend <a href="https://curl.haxx.se/download.html">downloading</a> precompiled binaries for MinGW. Inside <code>../curl-x.xx.x-win64-mingw/bin</code> you will find <code>libcurl-x64.dll</code>. Copy the dll into <code>C:\Windows\System32</code>.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Build this library with CMake</h3>
<p>Inside <code>/../../libEVEAuth</code>:</p>
<ol type="1">
<li>Make a build directory: <br  />
 <div class="fragment"><div class="line">```cd buil</div>
</div><!-- fragment --></li>
<li>Configure files for MinGW (don't forget the 'full stops' at the end!): <br  />
 <div class="fragment"><div class="line">3. Build and install:  </div>
<div class="line">```cmake --build . --target instal</div>
</div><!-- fragment --></li>
</ol>
<p>If you do not want that the library is installed in the predefined system directory, uncomment the CMAKE_INSTALL_PREFIX to install the library into the source directory.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Linking</h3>
<p>Since the library depends on <a href="https://www.openssl.org/">OpenSSL</a> and <a href="https://curl.haxx.se/libcurl/">libcurl</a> you need to link against them properly. This includes linking with Threads too. Have a look into the CMakeLists.txt of this project to see how you can link using CMake.</p>
<div class="fragment"><div class="line">...</div>
<div class="line"> </div>
<div class="line">find_package(EVEAuth REQUIRED)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(${PROJECT_NAME} EVEAuth ... )</div>
<div class="line"> </div>
<div class="line">...</div>
</div><!-- fragment --><p>On Windows you also have to link against wldap32 ws2_32:</p>
<div class="fragment"><div class="line">target_link_libraries(${PROJECT_NAME} EVEAuth curl OpenSSL::Crypto Threads::Threads dl wldap32 ws2_32)</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
